<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <title>Hello World!</title>
    <!-- 引入样式 -->
    <link rel="stylesheet" href="node_modules/xterm/dist/xterm.css">

    <style>
        #terminal-container {
            width: 800px;
            height: 450px;
            margin: 0 auto;
            padding: 2px;
        }

    </style>
</head>

<body>
    <div id="terminal-container"></div>

    <script>
        let {Terminal} = require("xterm")
        let terminalContainer = document.getElementById('terminal-container')
        let term = new Terminal();
        term.open(terminalContainer);
        // term.winptyCompatInit();
        // term.fit();
        term.focus();

        // term.prompt = function () {
        //     term.write('\r\n' + shellprompt);
        // };


        var Client = require('ssh2').Client;

         
        var conn = new Client();
        conn.on('ready', function () {
            console.log('Client :: ready');
            conn.shell({
                cols: 80,
                rows: 30
            },function (err, stream) {
                if (err) throw err;

                stream.on('data', function (chunk) {
                    // doSomething(chunk) ; // 具体细节自己任意发挥
                    // term.write()
                    term.write(chunk.toString())
                });

                stream.on("close", function() {
                    console.log("close")
                })

                term.on('data', function(a) {
                    // console.log(a)
                    stream.write(a);
                });


                // term.attach(stream);
                // stream.pipe(term);
                // terminal.pipe(stream);

                // term.writeln('Welcome to xterm.js');
                // term.writeln('This is a local terminal emulation, without a real terminal in the back-end.');
                // term.writeln('Type some keys and commands to play around.');
                // term.writeln('');


                // stream.pipe(terminal).dom(el).pipe(stream);
            });

        }).connect({
            host: '192.168.0.100',
            port: 22,
            username: 'pi',
            password: 'wty17962831'
            // privateKey: require('fs').readFileSync('/here/is/my/key')
        });



        // term.prompt();

    </script>

</body>

</html>